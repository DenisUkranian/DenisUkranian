owm = OWM('4d9c68ba051733b61d30fa2406658670')
mgr = owm.weather_manager()   
@app.on_message(filters.command('w', prefixes='/') )
def weather(_, msg):
    sity = msg.text.split("/w ", maxsplit=1)[1]

    observation = mgr.weather_at_place(sity)
    w = observation.weather
    ds = w.detailed_status
    wind = w.wind()
    vlaga = w.humidity
    temp = w.temperature('celsius')['temp']
    rain = w.rain
    clouds = w.clouds

    weather = f"""Weather in {sity}:
ğŸŒ… Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: {str(ds)}\n
ğŸƒ Ğ’ĞµÑ‚ĞµÑ€: {str(wind["speed"])}m/s, {str(wind["deg"])}Â°\n
ğŸ’¦ Ğ’Ğ»Ğ°Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ: {str(vlaga)}
ğŸŒ¡ Ğ¢ĞµĞ¼Ğ¿ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ°: {str(temp)} Â°C\n
ğŸŒ¦ Ğ´Ğ¾Ğ¶Ğ´ÑŒ: {str(rain)}\n
â˜ĞĞ±Ğ»Ğ°ĞºĞ°: {str(clouds)}
ğŸ—“ Ğ”Ğ°Ñ‚Ğ° Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸: - {time.asctime()}\n"""
    app.send_message(chat_id=msg.chat.id, text=weather, reply_to_message_id=msg.id)
